{% extends "base.html" %}
{% block content %}
<h2>{{ post.title }}</h2>
<p>{{ post.body|linebreaks }}</p>
<p>Posted by {{ post.author.username }} | Likes: {{ post.total_likes }}</p>
<a href="{% url 'discussionboard:like_post' post.id %}">Like / Unlike</a>
<hr>
<h3>Comments</h3>
<ul>
  {% for comment in comments %}
    <li>
      <p>{{ comment.author.username }}: {{ comment.content }}</p>
      <form method="post" action="{% url 'discussionboard:vote_comment' comment.id %}" style="display:inline">
        {% csrf_token %}
        <input type="hidden" name="value" value="1">
        <button type="submit">⬆️</button>
      </form>
      <strong>{{ comment.score }}</strong>
      <form method="post" action="{% url 'discussionboard:vote_comment' comment.id %}" style="display:inline">
        {% csrf_token %}
        <input type="hidden" name="value" value="-1">
        <button type="submit">⬇️</button>
      </form>
    </li>
  {% empty %}
    <li>No comments yet.</li>
  {% endfor %}
</ul>
<hr>
<h3>Add Comment</h3>
<form method="post">
  {% csrf_token %}
  {{ comment_form.as_p }}
  <button type="submit">Submit</button>
</form>
{% endblock %}
